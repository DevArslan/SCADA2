{% extends "wrapper.html" %}


{% block content %}
 <nav class="navbar navbar-dark bg-dark shadow">
    <a class="navbar-brand" href="">SCADA</a>
  <ul class="navbar-nav">
    <li class="nav-item">
      <button class="btn btn-info btn-lg" type="button" data-toggle="modal" data-target="#regForm">Logout</button>
    </li>
  </ul>
  </nav>
  <div class="container-fluid">
    <div class="row">
      <nav class="col-md-2 bg-light sidebar">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" href="#">Мой профиль</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/database">База данных</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/control">Мониторинг</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Статистика</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">FAQ</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">О нас</a>
          </li>
        </ul>
      </nav>
      <div col-md-10>
        <canvas id="myChart" width="800" height="400"></canvas>
      </div>
    </div>
  </div>


<script type="text/javascript">
  var ctx = document.getElementById('myChart').getContext('2d');
  var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: {{dataset_number}},
        datasets: [{
            label: 'Переходная характеристика',
            data: {{dataset_value}},
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});

</script>

<script type="text/javascript">

  var socket_url = 'ws://' + window.location.host + window.location.pathname

  var socket = new WebSocket(socket_url)

  socket.onmessage = function (event) {
    console.log(event)
  }

  socket.onopen = function (event) {
    console.log('socket opened',event) 
  }


</script>

{% endblock %}